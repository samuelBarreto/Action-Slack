name: 'Test Different Events'

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  issues:
    types: [ opened, closed ]
  release:
    types: [ published ]

jobs:
  test-events:
    runs-on: ubuntu-latest
    steps:
      - name: 'Checkout code'
        uses: actions/checkout@v4
      
      - name: 'Test Push Event'
        if: github.event_name == 'push'
        uses: ./
        with:
          webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
          message: 'ğŸš€ Push realizado na branch ${{ github.ref_name }}'
          channel: '#deployments'
          username: 'Deploy Bot'
          icon-emoji: ':rocket:'
      
      - name: 'Test Pull Request Event'
        if: github.event_name == 'pull_request'
        uses: ./
        with:
          webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
          message: 'ğŸ”€ Pull Request ${{ github.event.action }}: ${{ github.event.pull_request.title }}'
          channel: '#code-review'
          username: 'PR Bot'
          icon-emoji: ':git:'
      
      - name: 'Test Issue Event'
        if: github.event_name == 'issues'
        uses: ./
        with:
          webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
          message: 'ğŸ“ Issue ${{ github.event.action }}: ${{ github.event.issue.title }}'
          channel: '#issues'
          username: 'Issue Bot'
          icon-emoji: ':memo:'
      
      - name: 'Test Release Event'
        if: github.event_name == 'release'
        uses: ./
        with:
          webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
          message: 'ğŸ‰ Release ${{ github.event.action }}: ${{ github.event.release.name }}'
          channel: '#releases'
          username: 'Release Bot'
          icon-emoji: ':package:' 