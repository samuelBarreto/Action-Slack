name: 'Release Action'

on:
  push:
    tags:
      - 'v*'

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - name: 'Checkout code'
        uses: actions/checkout@v4
      
      - name: 'Create Release'
        uses: actions/create-release@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          tag_name: ${{ github.ref }}
          release_name: Release ${{ github.ref }}
          body: |
            ## üöÄ Nova vers√£o da Slack Notification Action
            
            ### üìã Mudan√ßas:
            - Melhorias na detec√ß√£o de eventos
            - Suporte a mensagens personalizadas
            - Documenta√ß√£o atualizada
            
            ### üõ†Ô∏è Como usar:
            ```yaml
            - name: 'Send Slack Notification'
              uses: samuelBarreto/Action-Slack@${{ github.ref_name }}
              with:
                webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
            ```
          
          draft: false
          prerelease: false
      
      - name: 'Notify Release'
        uses: ./
        with:
          webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
          message: 'üéä Nova vers√£o da Action lan√ßada: ${{ github.ref_name }}'
          channel: '#releases'
          username: 'Release Bot'
          icon-emoji: ':package:' 